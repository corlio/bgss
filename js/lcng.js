'use strict';var $=$||{};
$.dom=function(){function h(a){d[a]||(d[a]=document.getElementById(a),d[a]||$.throwf("element not found: #%s",a));return d[a]}function g(a){return"string"===typeof a?h(a):a}function k(a,b){var c=window.getComputedStyle(g(a),null);return 2>arguments.length?c:c[b]}function l(a,b){g(a).classList.add(b)}function m(a,b){g(a).classList.remove(b)}function n(a,b){return g(a).classList.contains(b)}function p(a,b){a=g(a);if(2>arguments.length)return a.disabled;a.disabled=b}function c(a,b){if(2>arguments.length)return n(a,
"hidden");b?l(a,"hidden"):m(a,"hidden")}function e(a){if(a.nodeType!==Node.TEXT_NODE){var b=a.getAttribute("id");b in d&&delete d[b];a.querySelectorAll("[id]").forEach(function(a){b=a.getAttribute("id");b in d&&delete d[b]})}}var d={};return{"class":{add:l,remove:m,test:n,toggle:function(a,b){a=g(a).classList;a.contains(b)?a.remove(b):a.add(b)}},all:function(a,b){if(2>arguments.length)return document.querySelectorAll(a).length;document.querySelectorAll(a).forEach(b)},append:function(a){a=g(a);for(var b=
1;b<arguments.length;b++)a.appendChild(g(arguments[b]))},attr:function(a,b,c){a=g(a);if(3>arguments.length)return a.getAttribute(b);a.setAttribute(b,c)},children:function(a,b){var c=g(a).children;if(2>arguments.length)return c.length;for(var d=0;d<c.length;d++)b(c[d],d)},create:function(a){for(var b=document.createElement(a),c=function(a,c){b.setAttribute(a,c)},d=1;d<arguments.length;d++){var e=arguments[d];if("string"===typeof e)b.classList.add(e);else if(e instanceof Array)for(var g=0;g<e.length;g++)b.classList.add(e[g]);
else $.map_each(e,c)}return b},css:k,disable:function(a){p(a,!0)},disabled:p,empty:function(a){a=g(a);for(var b=0;a.firstChild;)e(a.firstChild),a.removeChild(a.firstChild),b++;return b},enable:function(a){p(a,!1)},first:function(a){return document.querySelector(a)},fullscreen:function(a){var b=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement;if(1>arguments.length)return b?!0:!1;a&&!b?(b=document.documentElement,b.requestFullscreen?b.requestFullscreen():
b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullscreen?b.webkitRequestFullscreen():b.msRequestFullscreen&&b.msRequestFullscreen()):b&&!a&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())},get:h,height:function(a,b){a=g(a);if(2>arguments.length)return parseFloat(k(a,"height").replace("px",""));a.style.height=
b+"px"},hidden:c,hide:function(a){c(a,!0)},id:function(a,b){a=g(a);if(2>arguments.length)return a.getAttribute("id");a.setAttribute("id",b)},index:function(a){a=g(a);for(var b=0;a.previousSibling;)a=a.previousSibling,b++;return b},left:function(a,b){a=g(a);if(2>arguments.length)return a.offsetLeft;a.style.left=b+"px"},on:function(a,b,c){a=g(a);var d=Array.prototype.slice.call(arguments,2);a.addEventListener(b,function(a){var b=d.slice(0);b[0]=a;c.apply(null,b)})},prepend:function(a){a=g(a);for(var b=
1;b<arguments.length;b++)a.insertBefore(g(arguments[b]),a.firstChild)},remove:function(a){a=g(a);e(a);a.parentNode&&a.parentNode.removeChild(a)},reparent:function(a,b){a=g(a);b=g(b);if(a.parentNode){if(a.parentNode.isSameNode(b))return!1;a.parentNode.removeChild(a)}b.appendChild(a);return!0},show:function(a){c(a,!1)},text:function(a,b){a=g(a);if(2>arguments.length)return a.textContent;a.textContent=b},top:function(a,b){a=g(a);if(2>arguments.length)return a.offsetTop;a.style.top=b+"px"},width:function(a,
b){a=g(a);if(2>arguments.length)return parseFloat(k(a,"width").replace("px",""));a.style.width=b+"px"}}}();$.map_empty=function(h){for(var g in h)if(Object.prototype.hasOwnProperty.call(h,g))return!1;return!0};$.map_each=function(h,g){for(var k in h)Object.prototype.hasOwnProperty.call(h,k)&&g(k,h[k])};$.map_clone=function(h){var g={},k;for(k in h)Object.prototype.hasOwnProperty.call(h,k)&&(g[k]=h[k]);return g};
$.map_keys=function(h){var g=[],k;for(k in h)Object.prototype.hasOwnProperty.call(h,k)&&g.push(k);return g};$.map_values=function(h){var g=[],k;for(k in h)Object.prototype.hasOwnProperty.call(h,k)&&g.push(h[k]);return g};$.map_increment=function(h,g){g in h?h[g]++:h[g]=1};
$.md5=function(){function h(c,e){var d=(c&65535)+(e&65535);return(c>>16)+(e>>16)+(d>>16)<<16|d&65535}function g(c,e,d,a,b,f){c=h(h(e,c),h(a,f));return h(c<<b|c>>>32-b,d)}function k(c,e,d,a,b,f,h){return g(e&d|~e&a,c,e,b,f,h)}function l(c,e,d,a,b,f,h){return g(e&a|d&~a,c,e,b,f,h)}function m(c,e,d,a,b,f,h){return g(d^(e|~a),c,e,b,f,h)}function n(c){for(var e="",d,a=0;a<c.length;a++)d=c.charCodeAt(a),e+="0123456789abcdef".charAt(d>>>4&15)+"0123456789abcdef".charAt(d&15);return e}function p(c){for(var e=
Array(c.length>>2),d=0;d<e.length;d++)e[d]=0;for(d=0;d<8*c.length;d+=8)e[d>>5]|=(c.charCodeAt(d/8)&255)<<d%32;c=8*c.length;e[c>>5]|=128<<c%32;e[(c+64>>>9<<4)+14]=c;c=1732584193;d=-271733879;for(var a=-1732584194,b=271733878,f=0;f<e.length;f+=16){var p=c,n=d,q=a,u=b;c=k(c,d,a,b,e[f+0],7,-680876936);b=k(b,c,d,a,e[f+1],12,-389564586);a=k(a,b,c,d,e[f+2],17,606105819);d=k(d,a,b,c,e[f+3],22,-1044525330);c=k(c,d,a,b,e[f+4],7,-176418897);b=k(b,c,d,a,e[f+5],12,1200080426);a=k(a,b,c,d,e[f+6],17,-1473231341);
d=k(d,a,b,c,e[f+7],22,-45705983);c=k(c,d,a,b,e[f+8],7,1770035416);b=k(b,c,d,a,e[f+9],12,-1958414417);a=k(a,b,c,d,e[f+10],17,-42063);d=k(d,a,b,c,e[f+11],22,-1990404162);c=k(c,d,a,b,e[f+12],7,1804603682);b=k(b,c,d,a,e[f+13],12,-40341101);a=k(a,b,c,d,e[f+14],17,-1502002290);d=k(d,a,b,c,e[f+15],22,1236535329);c=l(c,d,a,b,e[f+1],5,-165796510);b=l(b,c,d,a,e[f+6],9,-1069501632);a=l(a,b,c,d,e[f+11],14,643717713);d=l(d,a,b,c,e[f+0],20,-373897302);c=l(c,d,a,b,e[f+5],5,-701558691);b=l(b,c,d,a,e[f+10],9,38016083);
a=l(a,b,c,d,e[f+15],14,-660478335);d=l(d,a,b,c,e[f+4],20,-405537848);c=l(c,d,a,b,e[f+9],5,568446438);b=l(b,c,d,a,e[f+14],9,-1019803690);a=l(a,b,c,d,e[f+3],14,-187363961);d=l(d,a,b,c,e[f+8],20,1163531501);c=l(c,d,a,b,e[f+13],5,-1444681467);b=l(b,c,d,a,e[f+2],9,-51403784);a=l(a,b,c,d,e[f+7],14,1735328473);d=l(d,a,b,c,e[f+12],20,-1926607734);c=g(d^a^b,c,d,e[f+5],4,-378558);b=g(c^d^a,b,c,e[f+8],11,-2022574463);a=g(b^c^d,a,b,e[f+11],16,1839030562);d=g(a^b^c,d,a,e[f+14],23,-35309556);c=g(d^a^b,c,d,e[f+
1],4,-1530992060);b=g(c^d^a,b,c,e[f+4],11,1272893353);a=g(b^c^d,a,b,e[f+7],16,-155497632);d=g(a^b^c,d,a,e[f+10],23,-1094730640);c=g(d^a^b,c,d,e[f+13],4,681279174);b=g(c^d^a,b,c,e[f+0],11,-358537222);a=g(b^c^d,a,b,e[f+3],16,-722521979);d=g(a^b^c,d,a,e[f+6],23,76029189);c=g(d^a^b,c,d,e[f+9],4,-640364487);b=g(c^d^a,b,c,e[f+12],11,-421815835);a=g(b^c^d,a,b,e[f+15],16,530742520);d=g(a^b^c,d,a,e[f+2],23,-995338651);c=m(c,d,a,b,e[f+0],6,-198630844);b=m(b,c,d,a,e[f+7],10,1126891415);a=m(a,b,c,d,e[f+14],15,
-1416354905);d=m(d,a,b,c,e[f+5],21,-57434055);c=m(c,d,a,b,e[f+12],6,1700485571);b=m(b,c,d,a,e[f+3],10,-1894986606);a=m(a,b,c,d,e[f+10],15,-1051523);d=m(d,a,b,c,e[f+1],21,-2054922799);c=m(c,d,a,b,e[f+8],6,1873313359);b=m(b,c,d,a,e[f+15],10,-30611744);a=m(a,b,c,d,e[f+6],15,-1560198380);d=m(d,a,b,c,e[f+13],21,1309151649);c=m(c,d,a,b,e[f+4],6,-145523070);b=m(b,c,d,a,e[f+11],10,-1120210379);a=m(a,b,c,d,e[f+2],15,718787259);d=m(d,a,b,c,e[f+9],21,-343485551);c=h(c,p);d=h(d,n);a=h(a,q);b=h(b,u)}e=[c,d,a,
b];c="";for(d=0;d<32*e.length;d+=8)c+=String.fromCharCode(e[d>>5]>>>d%32&255);return c}return{b64:function(c){c=p(c);for(var e="",d=c.length,a=0;a<d;a+=3)for(var b=c.charCodeAt(a)<<16|(a+1<d?c.charCodeAt(a+1)<<8:0)|(a+2<d?c.charCodeAt(a+2):0),f=0;4>f;f++)e=8*a+6*f>8*c.length?e+"":e+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(b>>>6*(3-f)&63);return e},hex:function(c){return n(p(c))},test:function(){var c=n(p("abc"));"900150983cd24fb0d6963f7d28e17f72"!=c&&$.throwf("MD5 self test failed: %s <> %s",
"900150983cd24fb0d6963f7d28e17f72",c);return"ok"}}}();
$.param=function(){var h,g;return{get:function(g){return h[g]},parse:function(){var k=window.location.search;if(!(1>=k.length)){k=k.substring(1).split("&");for(var l=0;l<k.length;l++){var m=k[l].split("=");2!=m.length&&$.throwf("unexpected parameter: %s",k);var n=decodeURI(m[1]);m[0]in g||$.throwf("unexpected parameter: %s",k);var p=typeof g[m[0]];"boolean"===p?h[m[0]]="false"!==n&&n?!0:!1:"number"===p?h[m[0]]=Number(n):"string"===p&&(h[m[0]]=n)}}},setup:function(k){h={};g=k;for(var l in g)h[l]=g[l]}}}();
$.shuffle=function(h){var g;for(g=h.length-1;0<g;g--){var k=Math.floor(Math.random()*(g+1));var l=h[g];h[g]=h[k];h[k]=l}};
$.sprintf=function(){var h=/[def]/,g=/^\x25(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosxX])/,k=/[^s]/,l=/^\x25{2}/,m=/^[^\x25]+/,n={};return function(p){if(!n[p]){for(var c=p,e,d=[];c;){if(null!==(e=m.exec(c)))d.push(e[0]);else if(null!==(e=l.exec(c)))d.push("%");else if(null!==(e=g.exec(c)))d.push(e);else throw"$.sprintf: unexpected format: "+c;c=c.substring(e[0].length)}n[p]=d}c=n[p];e=arguments;d=1;for(var a,b=[],f,r,t,q=0;q<c.length;q++)if(c[q]instanceof Array){f=c[q];a=e[d++];if(k.test(f[6])&&
"number"!==typeof a)throw"$.sprintf: expecting number but got "+typeof a;switch(f[6]){case "b":a=a.toString(2);break;case "c":a=String.fromCharCode(a);break;case "d":a=parseInt(a,10);break;case "e":a=f[5]?a.toExponential(f[5]):a.toExponential();break;case "f":a=f[5]?parseFloat(a).toFixed(f[5]):parseFloat(a);break;case "o":a=a.toString(8);break;case "s":a=String(a);a=f[5]?a.substring(0,f[5]):a;break;case "x":a=a.toString(16);break;case "X":a=a.toString(16).toUpperCase()}a=h.test(f[6])&&f[1]&&0<=a?
"+"+a:a;r=f[2]?"0"==f[2]?"0":f[2].charAt(1):" ";t=f[4]-String(a).length;r=f[4]?Array(t+1).join(r):"";b.push(f[3]?a+r:r+a)}else b.push(c[q]);return b.join("")}}();$.throwf=function(){throw $.sprintf.apply(null,arguments);};$.timestamp=function(h){return $.sprintf("%d/%02d/%02d-%02d:%02d:%02d",h.getFullYear(),h.getMonth()+1,h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds())};$.typeof=function(h){var g=typeof h;return"object"!==g?g:Object.prototype.toString.call(h).slice(8,-1)};
$.ucfirst=function(h){return h.charAt(0).toUpperCase()+h.slice(1)};
$.when=function(){function h(g,h,l,m,n){var k=new XMLHttpRequest;n||(n=function(c){$.throwf("%s %s failed: %s",g,h,c)});k.addEventListener("load",function(){if(200<=k.status&&400>k.status)try{m(JSON.parse(k.response))}catch(c){n(c)}else n(k.statusText||k.status)});k.addEventListener("error",function(){n(k.responseText||"error")});k.addEventListener("abort",function(){n("abort")});k.open(g,h,!0);l?(k.setRequestHeader("Content-Type","application/json"),k.send(JSON.stringify(l))):k.send()}return{json_get:function(g,
k,l){h("GET",g,null,k,l)},json_post:function(g,k,l,m){h("POST",g,k,l,m)},ready:function(g){document.addEventListener("DOMContentLoaded",g)}}}();
