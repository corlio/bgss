'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(b,a,c){if(null==b)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return b+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){b!=Array.prototype&&b!=Object.prototype&&(b[a]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,a,c,d){if(a){c=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var g=b[d];g in c||(c[g]={});c=c[g]}b=b[b.length-1];d=c[b];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:a})}};
$jscomp.polyfill("String.prototype.startsWith",function(b){return b?b:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var g=b.length,l=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var p=0;p<l&&c<g;)if(b[c++]!=a[p++])return!1;return p>=l}},"es6","es3");$jscomp.findInternal=function(b,a,c){b instanceof String&&(b=String(b));for(var d=b.length,g=0;g<d;g++){var l=b[g];if(a.call(c,l,g,b))return{i:g,v:l}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(b,a){this.$jscomp$symbol$id_=b;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:a})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function b(c){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(c||"")+"_"+a++,c)}var a=0;return b}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.asyncIterator;b||(b=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};
$jscomp.iteratorFromArray=function(b,a){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var c=0,d={next:function(){if(c<b.length){var g=c++;return{value:a(g,b[g]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
var bgss=function(){function b(a){return 10>a?"0"+a:a}function a(){var a=new Date;return a.getFullYear()+"/"+b(a.getMonth()+1)+"/"+b(a.getDate())+"-"+b(a.getHours())+":"+b(a.getMinutes())+":"+b(a.getSeconds())}function c(a){t.score(k[0],k[a]);var c=k[a].score;e.debug&&console.log("player "+a+" score:",c,k[a]);$("#score-"+a).is("input")?$("#score-"+a).val(c):$("#score-"+a).text(c);$("#result-"+a).text(c)}function d(b){var h=0;t.common&&(h+=t.common(k[0]));if(h||0===b)for(e.debug&&console.log("general:",
k[0]),b=1;b<=e.players;b++)c(b);else c(b);h={};var d=0;for(b=1;b<=e.players;b++)k[b].score in h?d++:h[k[b].score]=1;d?$("#tie").show():$("#tie").hide();$("#date").text(a())}function g(a){var c=0;if("checkbox"==a.attr("type"))return a.prop("checked");if(a.hasClass("togglable"))return!a.hasClass("hollow");var b=a.val();if(!b)return 0;var h=b.startsWith(".")?-parseInt(b.substring(1)):parseInt(b);h.toString()!=b&&c++;b=a.attr("min");"undefined"!==typeof b&&h<b&&(h=b,c++);b=a.attr("max");"undefined"!==
typeof b&&h>b&&(h=b,c++);c&&a.val(h);return h}function l(a){var b=[];$.each(v,function(c,h){h[a]&&b.push([c,h[a]])});b.sort(function(a,b){return a[1]>b[1]?1:a[1]<b[1]?-1:0});$("#game").data(a,b)}function p(a,c){a=a.clone().attr("id","player"+c);var h;a.find("*").each(function(a){(h=$(this).attr("id"))&&$(this).attr("id",h+"-"+c);(h=$(this).attr("for"))&&$(this).attr("for",h+"-"+c)});var d=1;a.find("input").each(function(a){$(this).attr("data-index",c+b(d));a=$(this).attr("min");var h=$(this).attr("max");
"undefined"!==typeof a&&"undefined"!==typeof h&&$(this).attr("placeholder",a+"-"+h);"undefined"===typeof a||"0"===a||$(this).attr("value")||$(this).attr("value",a);d++});return a}function q(){$("select[data-init]").each(function(a){a=$(this).data("init").split("/").map(function(a){return parseInt(a)});for(var b=a[0];b<=a[2];b++){var c=$("<option>").attr("value",b).text(b);b==a[1]&&c.attr("selected","selected");$(this).append(c)}})}function m(){var a;for(a=0;a<=e.players;a++)k.push({id:a});k[0].sum=
{};var b=$("#tabs").children("li").last();for(a=e.players;1<=a;a--){var c=$("<a>").attr("href","#player"+a).text(a);c=$("<li>").addClass("tabs-title").append(c);b.before(c);b=c}b=$("#_player_");for(a=1;a<=e.players;a++)$("#tabs-content").append(p(b,a));b.remove();$("#tabs").on("change.zf.tabs",function(){var a=$("#tabs-content").find(".tabs-panel.is-active").attr("id"),b=v[e.game][e.language];if(a&&a.startsWith("player")){a=parseInt(a.substring(6));var c="<span id='score-"+a+"'>"+k[a].score+"</span>";
$("#title").html(b+" - "+e.player[a-1]+" = "+c)}else $("#title").html(b)});$("#tabs-content").find("input,select").each(function(a){var b=$(this).attr("id");if(b&&(a=$(this).closest("div.tabs-panel").attr("id"))){if(a.startsWith("player")){var c=parseInt(a.substring(a.length-1));var h=b.substring(0,b.length-2)}else c=0,h=b;b in r&&("checkbox"==$(this).attr("type")?r[b]?$(this).prop("checked",!0):$(this).prop("checked",!1):$(this).val(r[b]));k[c][h]=g($(this));$(this).change(function(){k[c][h]=g($(this));
if($(this).hasClass("highlander")){var a=h,f=c;if(k[f][a])for(var u=1;u<=e.players;u++)u!=f&&k[u][a]&&$("#"+a+"-"+u).click()}r[b]=k[c][h];y();d(c)})}});$("#tabs-content").find("a.togglable").each(function(a){var b=$(this).attr("id");if(b&&(a=$(this).closest("div.tabs-panel").attr("id"))){if(a.startsWith("player")){var c=parseInt(a.substring(a.length-1));var h=b.substring(0,b.length-2)}else c=0,h=b;b in r&&(r[b]?$(this).removeClass("hollow"):$(this).addClass("hollow"));k[c][h]=g($(this));$(this).click(function(){$(this).hasClass("hollow")?
($(this).removeClass("hollow"),k[c][h]=!0):($(this).addClass("hollow"),k[c][h]=!1);r[b]=k[c][h];y();d(c)})}});for(a=1;a<=e.players;a++)d(a);Foundation.reInit($("#tabs"));$(".accordion").foundation()}function f(){$("body").on("keydown","input",function(a){13==a.which&&(a.preventDefault(),a=$(a.target).attr("data-index"))&&(a=parseInt(a)+1,$("[data-index="+a+"]").focus())})}function A(){$("#language").change(function(){e.language=$(this).val();e.debug&&console.log("language changed:",e.language);n();
w()});$("#game").change(function(){e.game=$(this).val();e.debug&&console.log("game changed:",e.game);z();w()});$("#players").change(function(){e.players=$(this).val();e.debug&&console.log("players changed:",e.players);x();w()});$("body").find("input").each(function(a){if((a=$(this).attr("id"))&&a.startsWith("player")){var b=parseInt(a.substring(6));$(this).change(function(){e.player[b-1]=$(this).val().trim();e.player[b-1]!=$(this).val()&&$(this).val(e.player[b-1]);e.debug&&console.log("player "+b+
" changed:",e.player[b-1]);w()})}});$("#clear").click(function(){for(var a=1;7>=a;a++)e.player[a-1]="",$("#player"+a).val("");w()});$("#next").click(function(){var a=window.location,b=e.game+".html#reset=1&language="+e.language+"&players="+e.players;e.debug&&(b+="&debug=1");for(var c=[],d=1;d<=e.players;d++)c.push(e.player[d-1]||d);b+="&names="+c.map(encodeURI).join(",");a.href=b})}function n(){var a="[lang="+e.language+"]";$("body").find("[lang]").not(a).hide();$("body").find(a).show();$("body").find("select.langaware").each(function(a){var b=
$(this);a=b.val();var c=b.data(e.language);b.empty();$.each(c,function(a,c){b.append($("<option>").attr("value",c[0]).html(c[1]))});a&&b.val(a)})}function z(){var a=v[e.game];$("#players").children("option").each(function(b){b=$(this).attr("value");a.min<=b&&b<=a.max?$(this).show():$(this).hide()});var b=0;e.players<a.min?b=a.min:e.players>a.max&&(b=a.max);b&&(e.players=b,$("#players").val(e.players),x());a.min==a.max?$("#players").prop("disabled","disabled"):$("#players").prop("disabled",!1)}function x(){$("body").find("div").each(function(a){(a=
$(this).attr("id"))&&a.startsWith("div")&&(parseInt(a.substring(3))<=e.players?$(this).show():$(this).hide())})}function B(){$("#language").val(e.language);n();$("#game").val(e.game);z();$("#players").val(e.players);x();$.each(e.player,function(a,b){$("#player"+(a+1)).val(b)})}function y(){"undefined"!==typeof Storage&&(e.debug&&console.log("store",r),localStorage.setItem("bgss.game",JSON.stringify(r)))}function w(){if("undefined"!==typeof Storage){e.debug&&console.log("store",e);var a={};$.each(e.player,
function(b,c){a[c]=1});e.names&&$.each(e.names,function(b,c){a[c]=1});delete a[""];e.names=Object.keys(a);e.names.sort();localStorage.setItem("bgss.main",JSON.stringify(e))}}function C(){var a=e.debug;if("undefined"!==typeof Storage){var b=localStorage.getItem("bgss.main");if(b){e=JSON.parse(b);"undefined"!==typeof a&&(e.debug=a);e.debug&&console.log("fetch",e);e.names&&$.each(e.names,function(a,b){$("datalist#names").append($("<option>").text(b))});return}}e={language:"en",game:"00164928",players:4,
player:"      ".split(" ")};"undefined"!==typeof a&&(e.debug=a)}function D(){e={language:"en",players:4,player:"1234567".split("")};var a=window.location.hash;a.length&&$.each(a.substring(1).split("&"),function(a,b){a=b.split("=");if(2===a.length&&"language"==a[0])e[a[0]]=a[1];else if(2!==a.length||"debug"!=a[0]&&"players"!=a[0]&&"reset"!=a[0])if(2===a.length&&"names"==a[0])e.player=a[1].split(",").map(decodeURI);else throw"unexpected query: "+b;else e[a[0]]=parseInt(a[1])});window.location.hash=
a.replace("reset=1&","");if(a=window.location.pathname.match(/(\d+)\.html$/))if(t=v[a[1]])e.game=a[1],$("#title").html(t[e.language]),document.title="BGSS - "+$("#title").text();else throw"unexpected game: "+a[1];else throw"unexpected pathname: "+window.location.pathname;e.debug&&console.log("url2state",e)}var r={},k=[],v={},e={},t;return{define:function(a,b){v[a]=b},init_main:function(){var a=window.location.hash;a.length&&(a=a.match(/debug=(\d)/))&&(e.debug=parseInt(a[1]));l("en");l("fr");f();A();
C();a=window.location.hash;a.length&&(a=a.match(/^#(\d{8})$/))&&(e.game=a[1]);B()},init_game:function(){D();if("undefined"!==typeof Storage)if(e.reset)localStorage.removeItem("bgss.game");else{var a=localStorage.getItem("bgss.game");a&&(r=JSON.parse(a),e.debug&&console.log("fetch",r))}t.init&&t.init(e);a=$("#results table tbody");for(var b=1;b<=e.players;b++){var c=$("<tr>");c.append($("<td>").html(e.player[b-1]));c.append($("<td>").attr("id","result-"+b).text("0"));a.append(c)}q();m();f();t.setup&&
t.setup(e);n();$("#tabs").children("li").first().click()},update_majority:function(a,b){for(var c={},d=1;d<=e.players;d++)c[k[d][a]]||(c[k[d][a]]=[]),c[k[d][a]].push(d);d=Object.keys(c);d.sort(function(a,b){return parseInt(a)>parseInt(b)?-1:parseInt(a)<parseInt(b)?1:0});var f=0,q;$.each(d,function(d,e){d=c[e];for(q=e=0;q<d.length;q++)e+=b[f++];e=Math.floor(e/d.length);for(q=0;q<d.length;q++)k[d[q]][a+"_bonus"]=e})},update_sum:function(a,b){b=b||0;for(var c=1;c<=e.players;c++)b+=k[c][a];if(a in k[0].sum&&
k[0].sum[a]==b)return 0;k[0].sum[a]=b;return 1}}}();bgss.define("00215471",function(){var b=7,a=[-3,1,3,4,7,8,10,11];return{en:"Wind the Film!",fr:"Photograph",min:2,max:4,init:function(a){b=2==a.players?5:3==a.players?6:7},setup:function(a){7>b&&$(".color7").hide();6>b&&$(".color6").hide()},score:function(c,d){d.score=0;for(c=1;c<=b;c++)if(c==d.regret)$("#player1 .color"+c).hide();else{$("#player1 .color"+c).show();d["c"+c+"-g"]&&(d.score+=5);var g=d.score,l=d["c"+c+"-s"];l>=a.length&&(l=a.length-1);d.score=g+a[l];d.score-=2*d["c"+c+"-b"]}}}}());bgss.define("00068448",function(){function b(a,b,g){return a*a+b*b+g*g+7*Math.min(a,b,g)}function a(a){if(0===a.wild)return b(a.tablets,a.compasses,a.gears);if(1===a.wild)return Math.max(b(a.tablets+1,a.compasses,a.gears),b(a.tablets,a.compasses+1,a.gears),b(a.tablets,a.compasses,a.gears+1));if(2===a.wild)return Math.max(b(a.tablets+2,a.compasses,a.gears),b(a.tablets,a.compasses+2,a.gears),b(a.tablets,a.compasses,a.gears+2),b(a.tablets+1,a.compasses+1,a.gears),b(a.tablets+1,a.compasses,a.gears+1),
b(a.tablets,a.compasses+1,a.gears+1));if(3===a.wild)return Math.max(b(a.tablets+3,a.compasses,a.gears),b(a.tablets,a.compasses+3,a.gears),b(a.tablets,a.compasses,a.gears+3),b(a.tablets+2,a.compasses+1,a.gears),b(a.tablets+2,a.compasses,a.gears+1),b(a.tablets+1,a.compasses+2,a.gears),b(a.tablets,a.compasses+2,a.gears+1),b(a.tablets+1,a.compasses,a.gears+2),b(a.tablets,a.compasses+1,a.gears+2),b(a.tablets+1,a.compasses+1,a.gears+1));throw"unexpected wild: "+a.wild;}return{en:"7 Wonders",fr:"7 Wonders",
min:2,max:7,score:function(b,d){d.scientific=a(d);$("#scientific-"+d.id).text(d.scientific);d.score=0;d.score+=Math.floor(d.coins/3);d.score+=d.military;d.score+=d.wonder;d.score+=d.civilian;d.score+=d.commercial;d.score+=d.guild;d.score+=d.scientific;d.score+=d.extra}}}());bgss.define("00000050",function(){return{en:"Lost Cities",fr:"Les Cit&eacute;s Perdues",min:2,max:2,score:function(b,a){a.score=0;for(b=1;5>=b;b++){var c=0;a["exp"+b+"-c1"]&&c++;a["exp"+b+"-c2"]&&c++;a["exp"+b+"-c3"]&&c++;for(var d=c,g=0,l=2;10>=l;l++)a["exp"+b+"-"+l]&&(d++,g+=l);d?(g=(g-20)*(c+1),8<=d&&(g+=20),c=g):c=0;a["score"+b]=c;$("#score"+b+"-"+a.id).text(c);a.score+=c}}}}());bgss.define("00312484",function(){return{en:"Lost Ruins of Arnak",fr:"Les Ruines Perdues de Narak",min:1,max:4,score:function(b,a){a.score=0;a.score+=a.research;a.score+=a.temple;a.score+=3*a.idol;a.score+=a.empty;a.score+=5*a.guardian;a.score+=a.item;a.score+=a.artifact;a.score-=a.fear1;a.score-=2*a.fear2}}}());bgss.define("00164928",function(){return{en:"Orl&eacute;ans",fr:"Orl&eacute;ans",min:2,max:5,score:function(b,a){a.score=0;a.score+=a.coins;a.score+=a.grain;a.score+=2*a.cheese;a.score+=3*a.wine;a.score+=4*a.wool;a.score+=5*a.brocade;a.score+=(a.citizens+a.stations)*a.development;a.score+=a.extra}}}());bgss.define("00193738",function(){return{en:"Great Western Trail",fr:"Great Western",min:2,max:4,score:function(b,a){a.score=0;a.score+=Math.floor(a.money/5);a.score+=a.buildings;a.score+=a.cities;a.score+=a.stations;a.score+=a.hazard;a.score+=a.cattle;a.score+=a.objective;a.score+=a.master;a.score+=4*a.workers;a.disc&&(a.score+=3);a.job&&(a.score+=2)}}}());bgss.define("00185343",function(){return{en:"Anachrony",fr:"Anachrony",min:1,max:4,score:function(b,a){a.score=0;a.score+=a.buildings;a.score+=a.projects;a.score-=3*a.anomalies;a.score+=a.travel;a.score+=a.morale;a.score+=a.breakthroughs1;a.score+=a.breakthroughs2;a.score+=a.breakthroughs3;a.score+=2*Math.min(a.breakthroughs1,a.breakthroughs2,a.breakthroughs3);a.score+=a.tokens;a.score-=2*a.warps;a.endgame1&&(a.score+=3);a.endgame2&&(a.score+=3);a.endgame3&&(a.score+=3);a.endgame4&&(a.score+=3);a.endgame5&&
(a.score+=3)}}}());bgss.define("00031260",function(){function b(a,b){a>=b.length&&(a=b.length-1);return b[a]}var a=[-1,-1,1,2,3,4],c=[-1,1,2,3,4],d=[-1,1,1,1,2,2,3,3,4],g=[-1,1,2,3,4],l=[-1,1,1,1,2,2,3,3,4],p=[-1,1,1,2,2,3,3,4],q=[-1,1,2,2,3,3,4];return{en:"Agricola",fr:"Agricola",min:1,max:5,score:function(m,f){f.score=0;f.score+=b(f.plowed,a);f.score+=b(f.pastures,c);f.score+=b(f.grain,d);f.score+=b(f.vegetables,g);f.score+=b(f.sheep,l);f.score+=b(f.boar,p);f.score+=b(f.cattle,q);f.score-=f.unused;f.score+=f.stables;
f.score+=f.clay;f.score+=2*f.stone;f.score+=3*f.family;f.score+=f.card;f.score+=f.bonus;f.score-=3*f.begging}}}());bgss.define("00227224",function(){function b(){var a,b=[],c=0,d;for(a=0;a<p;a++){c+=2*g[a];c+=l[a];var n=g[a]+l[a];0!=n&&(b[n]?b[n].push(a):b[n]=[a])}$("#value").text(c);for(a=1;a<=p;a++)$("#score-"+a).val(0);for(n=10;0<n;n--)if(b[n]){for(a=d=0;a<b[n].length;a++)d+=c,c=2==p?Math.floor(c/3):Math.floor(c/2);1<b[n].length&&(d=2==p?0:Math.floor(d/b[n].length));for(a=0;a<b[n].length;a++)$("#score-"+(b[n][a]+1)).val(d);if(0==c)break}}function a(){var a;for(a=0;a<p;a++)g[a]=0,$("#sections-"+(a+1)).val(0),
l[a]=0,$("#ornaments-"+(a+1)).val(0);b()}function c(a){a.data.array[a.data.index]=parseInt(a.target.value,10);b()}function d(a,b){var c;a=a.clone().attr("id","row"+b);a.find("*").each(function(a){(c=$(this).attr("id"))&&$(this).attr("id",c+"-"+b)});return a}var g=[],l=[],p=0;return{en:"The Red Cathedral",fr:"The Red Cathedral",min:2,max:4,score:function(){},setup:function(b){var m;p=b.players;var f=$("#row");for(m=1;m<=b.players;m++)$("#rows").append(d(f,m)),g.push(0),l.push(0);f.remove();$("#reset").on("click",
a);for(m=1;m<=b.players;m++)$("#name-"+m).val(b.player[m-1]),$("#sections-"+m).on("change",{array:g,index:m-1},c),$("#ornaments-"+m).on("change",{array:l,index:m-1},c),$("#score-"+m).val(0)}}}());bgss.define("00258389",function(){return{en:"Futuropia",fr:"Futuropia",min:1,max:4,score:function(b,a){a.score=0;a.score+=5*a.people;a.score+=a.quarters;a.score+=Math.floor((a.energy+a.food+a.money)/10);b.variant1?(a.score-=a.loans,a.score+=a.actions):(a.score-=3*a.loans,a.score+=3*a.actions);b.variant2?(a.score+=2*a.xenergy,a.score+=2*a.xfood):(a.score+=a.xenergy,a.score+=a.xfood)}}}());bgss.define("00269511",function(){return{en:"Cooper Island",fr:"Cooper Island",min:2,max:4,score:function(b,a){a.score=0;a.score+=5*a.books;a.score+=a.ship1;a.score+=a.ship2;a.score-=a.anchors;a.score+=a.royal;a.score+=a.building;a.score+=Math.floor((a.coins+a.resources+a.cartographer+a.landscape)/5)}}}());bgss.define("00228959",function(){return{en:"Alubari",fr:"Alubari",min:1,max:5,setup:function(b){1==b.players&&$("#equipment-1").parent().parent().hide()},score:function(b,a){a.score=0;a.score+=a.estates;a.score+=a.stations;a.score+=a.tracks;a.score+=a.contracts;a.score+=a.equipment;a.score+=a.chai;a.score+=a.tea/2}}}());bgss.define("00216132",function(){var b,a;return{en:"Clans of Caledonia",fr:"Clans of Caledonia",min:1,max:4,init:function(c){3<=c.players?(b=[12,6,0,0],a=[18,12,6,0]):(b=[8,0],a=[12,0])},common:function(c){var d=0+bgss.update_sum("cotton",.1);d+=bgss.update_sum("tobacco",.2);if(d+=bgss.update_sum("sugar",.3)){var g=["cotton","tobacco","sugar"];g.sort(function(a,b){return c.sum[a]>c.sum[b]?1:c.sum[a]<c.sum[b]?-1:0});c[g[0]]=5;c[g[1]]=4;c[g[2]]=3;$("#vp_cotton").text(c.cotton);$("#vp_tobacco").text(c.tobacco);
$("#vp_sugar").text(c.sugar)}d+=bgss.update_sum("contracts");d+=bgss.update_sum("settlements");bgss.update_majority("contracts",b);bgss.update_majority("settlements",a);return d},score:function(a,b){b.score=0;b.score+=b.glory;b.score+=b.basic;b.score+=2*b.processed;b.score+=Math.floor(b.money/10);b.score+=b.money%10/10;b.score+=b.hops;b.score+=b.cotton*a.cotton;b.score+=b.tobacco*a.tobacco;b.score+=b.sugar*a.sugar;b.score+=b.contracts_bonus;b.score+=b.settlements_bonus}}}());bgss.define("00124361",function(){return{en:"Concordia",fr:"Concordia",min:2,max:5,score:function(b,a){a.score=0;a.score+=Math.floor(a.money/10);a.score+=a.jupiter*a.houses;a.score+=a.saturnus*a.provinces;a.score+=a.mercurius*a.types;a.score+=a.mars*a.colonists;a.score+=3*a.brick;a.score+=3*a.food;a.score+=3*a.tool;a.score+=4*a.wine;a.score+=5*a.cloth;a.first&&(a.score+=7)}}}());bgss.define("00169786",function(){return{en:"Scythe",fr:"Scythe",min:1,max:7,score:function(b,a){a.score=0;a.score+=a.coins;6>=a.popularity?(a.score+=3*a.stars,a.score+=2*a.territories,a.score+=1*Math.floor(a.resources/2)):12>=a.popularity?(a.score+=4*a.stars,a.score+=3*a.territories,a.score+=2*Math.floor(a.resources/2)):(a.score+=5*a.stars,a.score+=4*a.territories,a.score+=3*Math.floor(a.resources/2));a.score+=a.bonus;a.score-=a.malus}}}());
